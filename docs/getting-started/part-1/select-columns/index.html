<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Smart Data Lake Builder RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Smart Data Lake Builder Atom Feed"><title data-react-helmet="true">Select Columns | Smart Data Lake Builder</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.smartdatalake.ch/docs/getting-started/part-1/select-columns"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Select Columns | Smart Data Lake Builder"><meta data-react-helmet="true" name="description" content="Goal"><meta data-react-helmet="true" property="og:description" content="Goal"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://www.smartdatalake.ch/docs/getting-started/part-1/select-columns"><link data-react-helmet="true" rel="alternate" href="https://www.smartdatalake.ch/docs/getting-started/part-1/select-columns" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.smartdatalake.ch/docs/getting-started/part-1/select-columns" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.dc3a20c1.css">
<link rel="preload" href="/assets/js/runtime~main.0957f89b.js" as="script">
<link rel="preload" href="/assets/js/main.c0b01ffd.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sdl_logo.png" alt="Smart Data Lake Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/sdl_logo.png" alt="Smart Data Lake Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Smart Data Lake</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/smart-data-lake/smart-data-lake" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/">Smart Data Lake</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/getting-started/setup">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/setup">Technical Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/get-input-data">Inputs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/docs/getting-started/part-1/get-departures">Part 1</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/part-1/get-departures">Get Departures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/part-1/get-airports">Get Airports</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/getting-started/part-1/select-columns">Select Columns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/part-1/joining-it-together">Joining It Together</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/part-1/joining-departures-and-arrivals">Get Departure Coordinates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/part-1/compute-distances">Compute Distances</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/getting-started/part-2/industrializing">Part 2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/getting-started/part-3/custom-webservice">Part 3</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/getting-started/troubleshooting/common-problems">Troubleshooting</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/reference/build">Reference</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/JsonSchemaViewer">Configuration Schema Viewer</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Select Columns</h1></header><h2 class="anchor anchorWithStickyNavbar_mojV" id="goal">Goal<a class="hash-link" href="#goal" title="Direct link to heading">â€‹</a></h2><p>In this step we write our first Action that modifies data.
We will continue based upon the config file available <a target="_blank" href="/assets/files/application-part1-download-b129c4e7b7f455917f3f1941b51b191b.conf">here</a>.
When you look at the data in the folder <em>data/stg-airports/result.csv</em>, you will notice that we
don&#x27;t need most of the columns. In this step, we will write a simple <em>CopyAction</em> that selects only the columns we
are interested in.</p><p>As usual, we need to define an output DataObject and an action.
We don&#x27;t need to define a new input DataObject as we will wire our new action to the existing DataObject <em>stg-airports</em>. </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="define-output-object">Define output object<a class="hash-link" href="#define-output-object" title="Direct link to heading">â€‹</a></h2><p>Let&#x27;s use CsvFileDataObject again because that makes it easy for us to check the result.
In more advanced (speak: real-life) scenarios, we would use one of numerous other possibilities,
such as HiveTableDataObject, SplunkDataObject...
See <a href="https://github.com/smart-data-lake/smart-data-lake/blob/develop-spark3/docs/Reference.md#data-objects" target="_blank" rel="noopener noreferrer">this list</a> for an overview.
You can also consult the <a href="https://smartdatalake.ch/json-schema-viewer/index.html#viewer-page?v=2" target="_blank" rel="noopener noreferrer">Configuration Schema Browser</a> to get a list of all Data Objects and related properties.</p><p>In a first step, we want to make the airport data more understandable by removing any columns we don&#x27;t need.
Since we don&#x27;t introduce any business logic into the transformation,
the resulting data object will reside in the integration layer and thus will be called <em>int-airports</em>.
Put this in the existing dataObjects section:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">  int-airports {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type = CsvFileDataObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path = &quot;~{id}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="define-select-airport-cols-action">Define select-airport-cols action<a class="hash-link" href="#define-select-airport-cols-action" title="Direct link to heading">â€‹</a></h2><p>Next, add these lines in the existing actions section:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">  select-airport-cols {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type = CopyAction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inputId = stg-airports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outputId = int-airports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transformers = [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        type = SQLDfTransformer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        code = &quot;select ident, name, latitude_deg, longitude_deg from stg_airports&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      feed = compute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>A couple of things to note here:</p><ul><li>We just defined a new action called <em>select-airport-cols</em>. </li><li>We wired it together with the two DataObjects <em>stg-airports</em> and <em>int-airports</em>.</li><li>A new type of Action was used: CopyAction. This action is intended to copy data from one data object to another
with some optional transformations of the data along the way.</li><li>To define the transformations of an action, you define a list of HOCON Objects.
HOCON-Objects are just like JSON-Objects (with a few added features, but more on that later).</li><li>Instead of allowing for just one transformer, we could potentially have multiple transformers within the same action that
get executed one after the other. That&#x27;s why we have the bracket followed by the curly brace <code>[{</code> :
the CustomSparkAction expects it&#x27;s field <em>transformers</em> to be a list of HOCON Objects.</li><li>There&#x27;s different kinds of transformers, in this case we defined a <em>SQLDfTransformer</em> and provided it with a custom SQL-Code.
There are other transformer types such as <em>ScalaCodeDfTransformer</em>, <em>PythonCodeDfTransformer</em>... More on that later.</li></ul><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Notice that we call our input DataObject stg-airports with a hyphen &quot;-&quot;, but in the sql, we call it &quot;stg<!-- -->_<!-- -->airports&quot; with an underscore &quot;<!-- -->_<!-- -->&quot;.
This is due to the SQL standard not allowing &quot;-&quot; in unquoted identifiers (e.g. table names).
Under the hood, Apache Spark SQL is used to execute the query, which implements SQL standard.
SDL works around this by replacing special chars in DataObject names used in SQL statements for you.
In this case, it automatically replaced <code>-</code> with <code>_</code></p></div></div><p>There are numerous other options available for the CopyAction, which you can view in the <a href="https://smartdatalake.ch/json-schema-viewer/index.html#viewer-page?v=3-0" target="_blank" rel="noopener noreferrer">Configuration Schema Browser</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="try-it-out">Try it out<a class="hash-link" href="#try-it-out" title="Direct link to heading">â€‹</a></h2><p>Note that we used a different feed this time, we called it <em>compute</em>.
We will keep expanding the feed <em>compute</em> in the next few steps.
This allows us to keep the data we downloaded in the previous steps in our local files and just
try out our new actions.</p><p>To execute the pipeline, use the same command as before, but change the feed to compute:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">Docker</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">Podman</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker run </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">rm </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">target</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">lib </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config sdl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">spark</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">latest </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">feed</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">sel compute</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">podman run </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">rm </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">target</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">lib </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config sdl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">spark</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">latest </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">feed</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">sel compute</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>If you encounter an error that looks like this:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Exception in thread &quot;main&quot; io.smartdatalake.util.dag.TaskFailedException: Task select-airport-cols failed. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Root cause is &#x27;IllegalArgumentException: requirement failed: (DataObject~stg-airports) DataObject schema </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">is undefined. A schema must be defined if there are no existing files.&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Caused by: java.lang.IllegalArgumentException: requirement failed: (DataObject~stg-airports) DataObject </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema is undefined. A schema must be defined if there are no existing files.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Execute the <strong><code>download</code></strong>-feed again. After that feed was successfully executed, the execution of the feed <code>.*</code> or <code>compute</code> will work.
More on this problem in the list of <a href="/docs/getting-started/troubleshooting/common-problems">Common Problems</a>.</p></div></div><p>Now you should see multiple files in the folder <em>data/int-airports</em>. Why is it split accross multiple files?
This is due to the fact that the query runs with Apache Spark under the hood which computes the query in parallel for different portions of the data.
We might work on a small data set for now, but keep in mind that this would scale up horizontally for large amounts of data.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="more-on-feeds">More on Feeds<a class="hash-link" href="#more-on-feeds" title="Direct link to heading">â€‹</a></h2><p>SDL gives you precise control on which actions you want to execute.
For instance if you only want to execute the action that we just wrote, you can type</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">Docker</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">Podman</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker run </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">rm </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">target</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">lib </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config sdl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">spark</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">latest </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">feed</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">sel ids</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">select</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">airport</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cols</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">podman run </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">rm </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">target</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">lib </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config sdl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">spark</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">latest </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">feed</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">sel ids</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">select</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">airport</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">cols</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div></div><p>Of course, at this stage, the feed <em>compute</em> only contains this one action, so the result will be the same.</p><p>SDL also allows you to use combinations of expressions to select the actions you want to execute. You can run</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">Docker</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">Podman</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker run </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">rm sdl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">spark</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">latest </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">help</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">podman run </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">rm sdl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">spark</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">latest </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">help</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div></div><p>to see all options that are available. For your convenience, here is the current output of the help command:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">  -f, --feed-sel &lt;operation?&gt;&lt;prefix:?&gt;&lt;regex&gt;[,&lt;operation?&gt;&lt;prefix:?&gt;&lt;regex&gt;...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           Select actions to execute by one or multiple expressions separated by comma (,). Results from multiple expressions are combined from left to right.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           Operations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - pipe symbol (|): the two sets are combined by union operation (default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - ampersand symbol (&amp;): the two sets are combined by intersection operation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - minus symbol (-): the second set is subtracted from the first set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           Prefixes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - &#x27;feeds&#x27;: select actions where metadata.feed is matched by regex pattern (default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - &#x27;names&#x27;: select actions where metadata.name is matched by regex pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - &#x27;ids&#x27;: select actions where id is matched by regex pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - &#x27;layers&#x27;: select actions where metadata.layer of all output DataObjects is matched by regex pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - &#x27;startFromActionIds&#x27;: select actions which with id is matched by regex pattern and any dependent action (=successors)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - &#x27;endWithActionIds&#x27;: select actions which with id is matched by regex pattern and their predecessors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - &#x27;startFromDataObjectIds&#x27;: select actions which have an input DataObject with id is matched by regex pattern and any dependent action (=successors)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           - &#x27;endWithDataObjectIds&#x27;: select actions which have an output DataObject with id is matched by regex pattern and their predecessors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           All matching is done case-insensitive.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           Example: to filter action &#x27;A&#x27; and its successors but only in layer L1 and L2, use the following pattern: &quot;startFromActionIds:a,&amp;layers:(l1|l2)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n, --name &lt;value&gt;       Optional name of the application. If not specified feed-sel is used.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -c, --config &lt;file1&gt;[,&lt;file2&gt;...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           One or multiple configuration files or directories containing configuration files, separated by comma. Entries must be valid Hadoop URIs or a special URI with scheme &quot;cp&quot; which is treated as classpath entry.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --partition-values &lt;partitionColName&gt;=&lt;partitionValue&gt;[,&lt;partitionValue&gt;,...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           Partition values to process for one single partition column.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --multi-partition-values &lt;partitionColName1&gt;=&lt;partitionValue&gt;,&lt;partitionColName2&gt;=&lt;partitionValue&gt;[;(&lt;partitionColName1&gt;=&lt;partitionValue&gt;,&lt;partitionColName2&gt;=&lt;partitionValue&gt;;...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           Partition values to process for multiple partitoin columns.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -s, --streaming          Enable streaming mode for continuous processing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --parallelism &lt;int&gt;      Parallelism for DAG run.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --state-path &lt;path&gt;      Path to save run state files. Must be set to enable recovery in case of failures.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --override-jars &lt;jar1&gt;[,&lt;jar2&gt;...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           Comma separated list of jar filenames for child-first class loader. The jars must be present in classpath.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --test &lt;config|dry-run&gt;  Run in test mode: config -&gt; validate configuration, dry-run -&gt; execute prepare- and init-phase only to check environment and spark lineage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --help                   Display the help text.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --version                Display version information.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -m, --master &lt;value&gt;     The Spark master URL passed to SparkContext (default=local[*], yarn, spark://HOST:PORT, mesos://HOST:PORT, k8s://HOST:PORT).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -x, --deploy-mode &lt;value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           The Spark deploy mode passed to SparkContext (default=client, cluster).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d, --kerberos-domain &lt;value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           Kerberos-Domain for authentication (USERNAME@KERBEROS-DOMAIN) in local mode.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u, --username &lt;value&gt;   Kerberos username for authentication (USERNAME@KERBEROS-DOMAIN) in local mode.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -k, --keytab-path &lt;value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           Path to the Kerberos keytab file for authentication in local mode.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>One popular option is to use regular expressions to execute multiple feeds together.
In our case, we can run the entire data pipeline with the following command : </p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">Docker</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">Podman</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker run </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">rm </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">target</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">lib </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config sdl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">spark</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">latest </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">feed</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">sel </span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">podman run </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">rm </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">target</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">lib </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">PWD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config sdl</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">spark</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">latest </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">mnt</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">feed</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">sel </span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="example-of-common-mistake">Example of Common Mistake<a class="hash-link" href="#example-of-common-mistake" title="Direct link to heading">â€‹</a></h2><p>One common mistake is mixing up the types of Data Objects.
To give you some experience on how to debug your config, you can also try out what happens if you change the type of <em>stg-airports</em> to JsonFileDataObject.
You will get an error message which indicates that there might be some format problem, but it is hard to spot :</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain"> Error: cannot resolve &#x27;`ident`&#x27; given input columns: [stg_airports._corrupt_record]; line 1 pos 7;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The FileTransferAction will save the result from the Webservice with the JsonFileDataObject as file with filetype <!-- -->*<!-- -->.json.
Then Spark tries to parse the CSV-records in the <!-- -->*<!-- -->.json file with a JSON-Parser. It is unable to properly read the data.
However, it generates a column named <em>_corrupt_record</em> describing what went wrong.
If you know Apache Spark, this column will look very familiar to you.
After that, the query fails, because it only finds that column with error messages instead of the actual data.</p><p>One way to get a better error message is to tell Spark that it should promptly fail when reading a corrupt file.
You can do that with the option <a href="https://smartdatalake.ch/json-schema-viewer/index.html#viewer-page?v=2-13-3" target="_blank" rel="noopener noreferrer">jsonOptions</a>,
which allows you to directly pass on settings to Spark.</p><p>In our case, we would end up with a faulty dataObject that looks like this:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">  stg-airports {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type = JsonFileDataObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path = &quot;~{id}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jsonOptions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;mode&quot;=&quot;failfast&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This time, it will fail with this error message:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Exception in thread &quot;main&quot; io.smartdatalake.workflow.TaskFailedException: Task select-airport-cols failed. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Root cause is &#x27;SparkException: Malformed records are detected in schema inference. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parse Mode: FAILFAST. Reasons: Failed to infer a common schema. Struct types are expected, but `string` was found.&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/smart-data-lake/smart-data-lake/tree/documentation/docs/getting-started/part-1/select-columns.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/getting-started/part-1/get-airports"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Get Airports</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/getting-started/part-1/joining-it-together"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Joining It Together</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#goal" class="table-of-contents__link toc-highlight">Goal</a></li><li><a href="#define-output-object" class="table-of-contents__link toc-highlight">Define output object</a></li><li><a href="#define-select-airport-cols-action" class="table-of-contents__link toc-highlight">Define select-airport-cols action</a></li><li><a href="#try-it-out" class="table-of-contents__link toc-highlight">Try it out</a></li><li><a href="#more-on-feeds" class="table-of-contents__link toc-highlight">More on Feeds</a></li><li><a href="#example-of-common-mistake" class="table-of-contents__link toc-highlight">Example of Common Mistake</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/smart-data-lake/smart-data-lake" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/smart-data-lake/smart-data-lake/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.elca.ch" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>ELCA<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Smart Data Lake, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0957f89b.js"></script>
<script src="/assets/js/main.c0b01ffd.js"></script>
</body>
</html>