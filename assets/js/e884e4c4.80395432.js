"use strict";(self.webpackChunksmart_data_lake=self.webpackChunksmart_data_lake||[]).push([[518],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=c(n),m=i,f=d["".concat(s,".").concat(m)]||d[m]||l[m]||o;return n?r.createElement(f,a(a({ref:t},u),{},{components:n})):r.createElement(f,a({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=d;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:i,a[1]=p;for(var c=2;c<o;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},505:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return p},metadata:function(){return c},toc:function(){return u}});var r=n(7462),i=n(3366),o=(n(7294),n(3905)),a=["components"],p={id:"housekeeping",title:"Housekeeping"},s=void 0,c={unversionedId:"reference/housekeeping",id:"reference/housekeeping",title:"Housekeeping",description:"This page is under review and currently not visible in the menu.",source:"@site/docs/reference/housekeeping.md",sourceDirName:"reference",slug:"/reference/housekeeping",permalink:"/docs/reference/housekeeping",editUrl:"https://github.com/smart-data-lake/smart-data-lake/tree/documentation/docs/reference/housekeeping.md",tags:[],version:"current",frontMatter:{id:"housekeeping",title:"Housekeeping"}},u=[{value:"Housekeeping",id:"housekeeping",children:[],level:2}],l={toc:u};function d(e){var t=e.components,n=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This page is under review and currently not visible in the menu."))),(0,o.kt)("h2",{id:"housekeeping"},"Housekeeping"),(0,o.kt)("p",null,"SmartDataLakeBuilder supports housekeeping for DataObjects by specifying the HousekeepingMode."),(0,o.kt)("p",null,"The following HousekeepingModes are currently implemented:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"PartitionRetentionMode: Define partitions to keep by configuring a retentionCondition.\nretentionCondition is a spark sql expression working with the attributes of PartitionExpressionData returning a boolean with value true if the partition should be kept."),(0,o.kt)("li",{parentName:"ul"},"PartitionArchiveCompactionMode: Archive and compact old partitions.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},'Archive partition reduces the number of partitions in the past by moving older partitions into special "archive partitions".\narchiveCondition defines a spark sql expression working with the attributes of PartitionExpressionData returning archive partition values as Map',"[","String,String","]",".\nIf return value is the same as input partition values, the partition is not touched. Otherwise all files of the partition are moved to the corresponding partition.\nBe aware that the value of the partition columns changes for these files/records."),(0,o.kt)("li",{parentName:"ul"},"Compact partition reduces the number of files in a partition by rewriting them with Spark.\ncompactPartitionExpression defines a sql expression working with the attributes of PartitionExpressionData returning true if this partition should be compacted.\nOnce a partition is compacted, it is marked as compacted and will not be compacted again. It is therefore ok to return true for all partitions which should be compacted, regardless if they have been compacted already.")))),(0,o.kt)("p",null,"Example - cleanup partitions with partition layout dt=","<","yyyymmdd",">"," after 90 days:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"housekeepingMode = {\n  type = PartitionRetentionMode\n  retentionCondition = \"datediff(now(), to_date(elements['dt'], 'yyyyMMdd')) &lt= 90\"\n}\n")))}d.isMDXComponent=!0}}]);