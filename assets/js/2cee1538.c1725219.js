"use strict";(self.webpackChunksmart_data_lake=self.webpackChunksmart_data_lake||[]).push([[6163],{8490:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var a=n(4848),i=n(8453);const o={id:"metadata",title:"Metadata and SDLB UI"},s=void 0,r={id:"getting-started/part-3/metadata",title:"Metadata and SDLB UI",description:"Goal",source:"@site/docs/getting-started/part-3/metadata.md",sourceDirName:"getting-started/part-3",slug:"/getting-started/part-3/metadata",permalink:"/docs/getting-started/part-3/metadata",draft:!1,unlisted:!1,editUrl:"https://github.com/smart-data-lake/smart-data-lake/tree/documentation/docs/getting-started/part-3/metadata.md",tags:[],version:"current",frontMatter:{id:"metadata",title:"Metadata and SDLB UI"},sidebar:"tutorialSidebar",previous:{title:"Incremental Mode",permalink:"/docs/getting-started/part-3/incremental-mode"},next:{title:"Common Problems",permalink:"/docs/getting-started/troubleshooting/common-problems"}},d={},c=[{value:"Goal",id:"goal",level:2},{value:"Add metadata for Actions, DataObjects and Transformations",id:"add-metadata-for-actions-dataobjects-and-transformations",level:2},{value:"Create comprehensive documentation using markdown files",id:"create-comprehensive-documentation-using-markdown-files",level:2},{value:"Generate schema and statistics metadata",id:"generate-schema-and-statistics-metadata",level:2},{value:"SDLB UI",id:"sdlb-ui",level:2},{value:"Summary",id:"summary",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"goal",children:"Goal"}),"\n",(0,a.jsxs)(t.p,{children:["SDLB is following a ",(0,a.jsx)(t.em,{children:"documentation from metadata and code"})," approach.\nIn this part, we are going to dive into the role of descriptive metadata in SDLB, and demonstrate how to create this additional metadata and its benefits.\nAgain it is based on the departures/airports/btl.conf configuration files from the previous steps."]}),"\n",(0,a.jsxs)(t.p,{children:["Descriptive metadata, in the context of SDLB, refers to additional configuration attributes, markdown files and generated json files, that go beyond the basic ",(0,a.jsx)(t.em,{children:"id"})," of DataObjects and Actions.\nIt is mainly about adding information to document, manage and explore data pipelines effectively in the SDLB UI."]}),"\n",(0,a.jsx)(t.p,{children:"Of course descriptive metadata is not needed to run your data pipeline, but you will see how it will create a nice, up-to-date documentation in the SDLB UI"}),"\n",(0,a.jsx)(t.h2,{id:"add-metadata-for-actions-dataobjects-and-transformations",children:"Add metadata for Actions, DataObjects and Transformations"}),"\n",(0,a.jsx)(t.p,{children:"One part of metadata is additional informations for DataObjects, Actions and Transformations."}),"\n",(0,a.jsxs)(t.p,{children:["Metadata for ",(0,a.jsx)(t.strong,{children:"Actions"})," can include attributes shown in the following example for ",(0,a.jsx)(t.code,{children:"join-departures-airports"}),".\nWe have already seen the ",(0,a.jsx)(t.code,{children:"feed"})," attribute. The ",(0,a.jsx)(t.code,{children:"tags"})," attribute can take a list of arbitrary tags for your Action.\nAnd to write longer ",(0,a.jsx)(t.code,{children:"description"}),"s you can use Hocon's multi-line string syntax."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'    metadata {\n      feed = compute\n      name = "Airport Departures Join"\n      tags = ["merge", "airports", "coordinates"]\n      description = """\n        Merging flight details and airport locations.\n        Join needs to be done for departure and arrival.\n      ""\n    }\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Metadata for ",(0,a.jsx)(t.strong,{children:"DataObjects"})," can include attributes shown in the next example for ",(0,a.jsx)(t.code,{children:"ext-departures"}),".\nAgain ",(0,a.jsx)(t.code,{children:"tags"})," attribute can take a list of arbitrary tags.\n",(0,a.jsx)(t.code,{children:"layer"})," should be a name for the stage of the DataObject in the data pipeline, e.g. extern/stage/integration/btl according to our convention,\nor bronze/silver/gold for the Lakehouse approach.\nAnd ",(0,a.jsx)(t.code,{children:"subjectArea"})," can be used to group DataObjects according to topics or business areas."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'    metadata = {\n      name = "Flight Departures Web Download"\n      tags = ["aviation", "flight", "departures"]\n      layer = "extern"\n      subjectArea = "flight data"\n      description = "OpenSky Network flight departures"\n    }\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Metadata for ",(0,a.jsx)(t.strong,{children:"Transformations"})," can be added as ",(0,a.jsx)(t.code,{children:"description"})," attribute in the corresponding configuration,\nbut it is even nicer to document it right in the code if it is a ",(0,a.jsx)(t.em,{children:"ScalaClassSparkDfTransformer"})," like ",(0,a.jsx)(t.code,{children:"com.sample.ComputeDistanceTransformer"}),".\nSee the following ",(0,a.jsx)(t.em,{children:"ScalaDoc"})," comment already existing in file ",(0,a.jsx)(t.code,{children:"src/main/scala/com/sample/ComputeDistanceTransformer.scala"}),":"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"/**\n * ComputeDistanceTransformer uses method calculateDistanceInKilometer to calculate distance between two GPS coordinates\n * with respect to the earth radius.\n */\nclass ComputeDistanceTransformer extends CustomDfTransformer {\n...\n"})}),"\n",(0,a.jsxs)(t.p,{children:["To make the Scala documentation available in the UI, the Java command line tool called ",(0,a.jsx)(t.em,{children:"ConfigJsonExporter"}),"\nwill export a parsed and enriched configuration as Json file, including code comments. Details follow later in this chapter."]}),"\n",(0,a.jsx)(t.p,{children:"Lets now add some descriptions, tags and other metadata to our configuration files."}),"\n",(0,a.jsx)(t.h2,{id:"create-comprehensive-documentation-using-markdown-files",children:"Create comprehensive documentation using markdown files"}),"\n",(0,a.jsxs)(t.p,{children:["Additionally, we want to create a comprehensive documentation for DataObject ",(0,a.jsx)(t.code,{children:"btl-distance"}),", as the logic could need some explanation.\nFor this we will write a separate markdown file. The UI will search markdown files for configuration objects according to the\nfollowing path convention: ",(0,a.jsx)(t.code,{children:"[dataObjects|actions|connections]/<id>.md"}),".\nLet's edit therefore file ",(0,a.jsx)(t.code,{children:"viz/dataObjects/btl-distance.md"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["The existing file already contains some examples to create titles, tables and include images.\nAnd there is an example of a special syntax to create column descriptions using ",(0,a.jsx)(t.code,{children:"@column"})," keyword.\nThese columns descriptions will be rendered as markdown-table, and are also shown as column comments in the schema."]}),"\n",(0,a.jsxs)(t.p,{children:["Lets add an additional comment for column ",(0,a.jsx)(t.code,{children:"dep_name"})," to the markdown."]}),"\n",(0,a.jsx)(t.h2,{id:"generate-schema-and-statistics-metadata",children:"Generate schema and statistics metadata"}),"\n",(0,a.jsxs)(t.p,{children:["What would be a DataObject configuration viewer without possibility to see structured DataObject schemas.\nUsing a Java command line tool called ",(0,a.jsx)(t.em,{children:"DataObjectSchemaExporter"}),", schema, table statistics and column statistics can be exported as Json data for SDLB UI."]}),"\n",(0,a.jsxs)(t.p,{children:["To start the ",(0,a.jsx)(t.em,{children:"DataObjectSchemaExporter"})," and also the previously mentioned ",(0,a.jsx)(t.em,{children:"ConfigJsonExporter"}),", execute the following command:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"./exportConfigSchemaStats.sh\n"})}),"\n",(0,a.jsx)(t.admonition,{title:"Scheduling export",type:"tip",children:(0,a.jsxs)(t.p,{children:["Export configuration, schema and statistics at least with every release of your data pipelines.\nFor this you can easily add ",(0,a.jsx)(t.em,{children:"ConfigJsonExporter"})," and ",(0,a.jsx)(t.em,{children:"DataObjectSchemaExporter"})," command line tool in the corresponding release pipeline."]})}),"\n",(0,a.jsx)(t.h2,{id:"sdlb-ui",children:"SDLB UI"}),"\n",(0,a.jsx)(t.p,{children:"Now it's time to see the result in the SDLB UI.\nFirst you need to download the current version of the SDLB Visualizer using the following command:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"./updateViz.sh\n"})}),"\n",(0,a.jsxs)(t.p,{children:["Then you can start a Webserver to serve the SDLB UI on port ",(0,a.jsx)(t.a,{href:"http://localhost:5000",children:"http://localhost:5000"})," using the following command:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"./startViz.sh\n"})}),"\n",(0,a.jsx)(t.p,{children:"To stop the Webserver press Ctrl-C."}),"\n",(0,a.jsxs)(t.p,{children:["If something doesn't work as expected, you can also have a look at the official ",(0,a.jsx)(t.a,{href:"https://ui-demo.smartdatalake.ch/",children:"UI Demo"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["Don't forget to check the ",(0,a.jsx)(t.a,{href:"https://ui-demo.smartdatalake.ch/#/config/dataObjects/btl-distances/",children:"lineage graph"})," of the data pipeline that you have created through this tutorial.\nTo expand all nodes use the ",(0,a.jsx)(t.em,{children:"Expand graph"})," button as shown in the following screenshot:"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Image",src:n(1726).A+"",width:"1077",height:"193"})}),"\n",(0,a.jsxs)(t.admonition,{type:"note",children:[(0,a.jsx)(t.p,{children:"As the local UI deployment is a static web application without backend service, it needs a listing of all state files."}),(0,a.jsx)(t.p,{children:"The state index file is updated at the end of each run by appending a line for the new state file.\nTherefore, you can see an SDLB run in the local UI only once it finished ordinarily (SUCCESS or FAILED), but not if the corresponding process was killed."}),(0,a.jsxs)(t.p,{children:["A configuration index file is not needed as we use ",(0,a.jsx)(t.em,{children:"ConfigJsonExporter"})," command line tool.\nDon't forget to re-run it in order to have configuration changes reflected in the SDLB UI."]}),(0,a.jsx)(t.p,{children:"Should you need to re-create the state index file, you can use the following commands:"}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"pushd viz\n./build_index.sh ./state\npopd\n"})})]}),"\n",(0,a.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsxs)(t.p,{children:["The final solution for departures/airports/btl.conf should look like the files ending with ",(0,a.jsx)(t.code,{children:"part-3-solution"})," in ",(0,a.jsx)(t.a,{href:"https://github.com/smart-data-lake/getting-started/tree/master/config",children:"this directory"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"In conclusion, descriptive metadata together with a flexible UI is the unsung hero of data pipeline management,\nenabling teams to organize and document data more efficiently."}),"\n",(0,a.jsx)(t.p,{children:'Soon, the SDLB UI will be available also "as-a-service". Stay tuned!'})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},1726:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/lineage_expanded-23bd0e8a35892ec177c33b3fbb0427e3.png"},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var a=n(6540);const i={},o=a.createContext(i);function s(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);