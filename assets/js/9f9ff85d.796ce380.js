"use strict";(self.webpackChunksmart_data_lake=self.webpackChunksmart_data_lake||[]).push([[1673],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(n),m=a,f=p["".concat(s,".").concat(m)]||p[m]||u[m]||o;return n?r.createElement(f,i(i({ref:t},d),{},{components:n})):r.createElement(f,i({ref:t},d))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1487:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return s},default:function(){return p},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return d}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],l={id:"hoconOverview",title:"Hocon Configurations"},s=void 0,c={unversionedId:"reference/hoconOverview",id:"reference/hoconOverview",title:"Hocon Configurations",description:"This page is under review and currently not visible in the menu.",source:"@site/docs/reference/hoconOverview.md",sourceDirName:"reference",slug:"/reference/hoconOverview",permalink:"/docs/reference/hoconOverview",editUrl:"https://github.com/smart-data-lake/smart-data-lake/tree/documentation/docs/reference/hoconOverview.md",tags:[],version:"current",frontMatter:{id:"hoconOverview",title:"Hocon Configurations"}},d=[{value:"Overview",id:"overview",children:[{value:"Global Options",id:"global-options",children:[],level:3},{value:"Secrets User and Password Variables",id:"secrets-user-and-password-variables",children:[],level:3},{value:"Local substitution",id:"local-substitution",children:[],level:3}],level:2}],u={toc:d};function p(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This page is under review and currently not visible in the menu."))),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"The configuration files are stored in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/lightbend/config/blob/master/HOCON.md"},"HOCON")," file format.\nThe main sections are global, connections, data objects and actions.\nAs a starting point, use the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/smart-data-lake/sdl-examples/blob/develop/src/main/resources/application.conf"},"application.conf")," from SDL-examples.\nMore details and options are described below."),(0,o.kt)("h3",{id:"global-options"},"Global Options"),(0,o.kt)("p",null,"In the global section of the configuration you can set global configurations such as spark options used by all executions.\nYou can find a list of all configurations in the ",(0,o.kt)("a",{parentName:"p",href:"https://smartdatalake.ch/json-schema-viewer/index.html#viewer-page?v=0"},"Configuration Schema Browser"),".",(0,o.kt)("br",{parentName:"p"}),"\n","A good list with examples can be found in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/smart-data-lake/sdl-examples/blob/develop/src/main/resources/application.conf"},"application.conf")," of sdl-examples."),(0,o.kt)("h3",{id:"secrets-user-and-password-variables"},"Secrets User and Password Variables"),(0,o.kt)("p",null,"TODO:\nMention Azure Key Vault here or at least point to the Azure specific doc to be created."),(0,o.kt)("p",null,"Usernames, passwords and other secrets should not be stored in your configuration files in clear text as these files are often stored directly in the version control system.\nThey should also not be visible in logfiles after execution."),(0,o.kt)("p",null,"Instead of having the username and password configured directly in your configuration files, you can use secret providers\nfor configuration values that end with ",(0,o.kt)("inlineCode",{parentName:"p"},"...Variable"),", like BasicAuthMode's userVariable and passwordVariable.\nTo configure a secret use the convention ",(0,o.kt)("inlineCode",{parentName:"p"},"&ltSecretProviderId&gt#&ltSecretName&gt"),"."),(0,o.kt)("p",null,"Default secret providers are:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"SecretProviderId"),(0,o.kt)("th",{parentName:"tr",align:null},"Pattern"),(0,o.kt)("th",{parentName:"tr",align:null},"Meaning"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"CLEAR"),(0,o.kt)("td",{parentName:"tr",align:null},"CLEAR#pd"),(0,o.kt)("td",{parentName:"tr",align:null},"The secret will be used literally (cleartext). This is only recommended for test environments.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"ENV"),(0,o.kt)("td",{parentName:"tr",align:null},"ENV#pd"),(0,o.kt)("td",{parentName:"tr",align:null},'The value for this secret will be read from the environment variable called "pd".')))),(0,o.kt)("p",null,"You can configure custom secret providers by providing a list of secret providers with custom options and their id in GlobalConfig as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"global {\n  secretProviders {\n    &ltsecretProviderId&gt = {\n     className = &ltfully qualified class name of SecretProvider&gt\n     options = { &ltoptions as key/value&gt }\n    }\n  }\n}\n")),(0,o.kt)("p",null,"Example: configure DatabricksSecretProvider with id=DBSECRETS and scope=test (scope is a specific configuration needed for accessing secrets in Databricks)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"global {\n  secretProviders {\n    DBSECRETS = {\n     className = io.smartdatalake.util.secrets.DatabricksSecretProvider\n     options = { scope = test }\n    }\n  }\n}\n")),(0,o.kt)("p",null,"You can create custom SecretProvider classes by implementing trait SecretProvider and a constructor with parameter ",(0,o.kt)("inlineCode",{parentName:"p"},"options: Map[String,String]"),"."),(0,o.kt)("h3",{id:"local-substitution"},"Local substitution"),(0,o.kt)("p",null,'Local substitution allows to reuse the id of a configuration object inside its attribute definitions by the special token "~{id}". See the following example:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'dataObjects {\n  dataXY {\n    type = HiveTableDataObject\n    path = "/data/~{id}"\n    table {\n      db = "default"\n      name = "~{id}"\n    }\n  }\n}\n')),(0,o.kt)("p",null,"Note: local substitution only works in a fixed set of attributes defined in Environment.configPathsForLocalSubstitution."))}p.isMDXComponent=!0}}]);