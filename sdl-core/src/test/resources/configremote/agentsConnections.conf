agents {
  remoteAgent1 {
    remoteAgentURL = "ws://localhost:4441/ws/"
    connections =  [
      localSql
    ]

  }
}

connections {
  localAgentSql {
    type = JdbcTableConnection
    url = "jdbc:sqlserver://mssqlserver:1433;encrypt=true;trustServerCertificate=true"
    driver = com.microsoft.sqlserver.jdbc.SQLServerDriver
    authMode {
      type = BasicAuthMode
      userVariable = "CLEAR#sa"
      passwordVariable = "replaced_by_agent_env_variable"
    }
  }

  cloudSql {
    type = JdbcTableConnection
    url = "jdbc:sqlserver://mssqlserver:1433;encrypt=true;trustServerCertificate=true"
    driver = com.microsoft.sqlserver.jdbc.SQLServerDriver
    authMode {
      type = BasicAuthMode
      userVariable = "CLEAR#sa"
      passwordVariable = "CLEAR#%abcd1234%"
    }
  }
}

actions {
  a {
    excecutonAgent=remoteAgent1
    type = CopyAction
    inputId = src1
    outputId = tgt1
    metadata.feed = test
  }
}

dataObjects {

  connectionId = localSql

  ext-chess {
    type = JdbcTableDataObject
    connectionId = localSql
    table = {
      name = "dbo.chess"
      db = "foobar"
    }
  }
  int-chess {
    type = JdbcTableDataObject
    connectionId = cloudSql
    table = {
      name = "dbo.chess"
      db = "foobar"
    }
  }
}